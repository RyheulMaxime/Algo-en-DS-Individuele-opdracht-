<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AL&DS Shop — Product Info</title>
    
    <link rel="icon" sizes="16x16" href="../static/favicon/favicon-16x16.png">
    <link rel="icon" sizes="32x32" href="../static/favicon/favicon-32x32.png">

    <link rel="stylesheet" href="../static/style.css">
</head>

<body>
    <header class="site-header" role="banner">
        <a class="site-header__brand" href="/" aria-label="Return to Home">AL&amp;DS Shop</a>
        <p class="site-header__tagline">Curated products — clean design, delightful shopping</p>

        <div class="user-menu" aria-hidden="false">
            <div id="user-dropdown" class="user-menu__dropdown" aria-haspopup="true">
                {% if customer %}
                    <button id="user-button" class="user-menu__trigger" aria-expanded="false">
                        {{ customer.customername }}
                    </button>
                    <div class="user-menu__content" role="menu" aria-label="User menu">
                        <a role="menuitem" class="user-menu__link" href="/customer">Customer Profile</a>
                        <a role="menuitem" class="user-menu__link" href="/logout">Logout</a>
                    </div>
                {% else %}
                    <button id="user-button" class="user-menu__trigger" aria-expanded="false">
                        Account
                    </button>
                    <div class="user-menu__content" role="menu" aria-label="Account menu">
                        <a role="menuitem" class="user-menu__link" href="/login">Login</a>
                        <a role="menuitem" class="user-menu__link" href="/register">Register</a>
                    </div>
                {% endif %}
            </div>
        </div>
    </header>

    <main role="main">
        {% if product and supplier and category %}
        <div class="product-layout">
            
            <article class="card product-info js-product-info" id="{{ product.productid }}">
                <h1 style="margin-top:0; font-size:2rem;">{{ product.productname }}</h1>
                <p class="product-card__price" style="font-size:2rem; margin: 0.5rem 0 1.5rem;">${{ product.price }}</p>
                
                <div style="margin-bottom:0.5rem; color:var(--color-text-muted);">
                    <strong style="color:var(--color-text-main);">Unit:</strong> {{ product.unit }}
                </div>
                
                <div style="margin-bottom:0.5rem; color:var(--color-text-muted);">
                    <strong style="color:var(--color-text-main);">Category:</strong> {{ category.categoryname }}
                </div>
                
                <div style="margin-bottom:0.5rem; color:var(--color-text-muted);">
                    <strong style="color:var(--color-text-main);">Supplier:</strong> 
                    <a href="/supplier?id={{ supplier.supplierid }}" style="color:var(--color-brand-primary); text-decoration:underline; text-underline-offset:2px;">
                        {{ supplier.suppliername }}
                    </a>
                </div>
            </article>

            <aside style="display:flex; flex-direction:column; gap:1.5rem;">
                
                <section class="card">
                    <form action="/product?id={{ product.productid }}&supplierid={{ supplier.supplierid }}&categoryid={{ category.categoryid }}" method="post">
                        <div class="form-group">
                            <label class="form-label" for="quantity">Quantity</label>
                            <input class="form-input" name="quantity" id="quantity" type="number" min="1" value="1">
                        </div>
                        <button type="submit" class="btn btn--primary btn--full">Order Product</button>
                    </form>
                </section>
                
            </aside>
        </div>

        {% else %}
        <div class="product-layout">
            <div class="empty-state">
                <h1>Product not found</h1>
                <p>The product you are looking for does not exist or has been removed.</p>
                <a href="/" class="btn btn--primary" style="margin-top:1rem;">Return to Shop</a>
            </div>
        </div>
        {% endif %}
    </main>

    <script>
        (function(){
            'use strict';
            
            const dropdown = document.getElementById('user-dropdown');
            const dropdownBtn = document.getElementById('user-button');
            
            if (dropdownBtn && dropdown) {
                dropdownBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    dropdown.classList.toggle('is-open');
                    const expanded = dropdownBtn.getAttribute('aria-expanded') === 'true';
                    dropdownBtn.setAttribute('aria-expanded', String(!expanded));
                });

                document.addEventListener('click', (e) => {
                    if (!dropdown.contains(e.target)) {
                        dropdown.classList.remove('is-open');
                        dropdownBtn.setAttribute('aria-expanded', 'false');
                    }
                });
            }
        })();
    </script>
</body>
</html>