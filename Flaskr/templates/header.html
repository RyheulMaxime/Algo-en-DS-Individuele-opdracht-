<header class="site-header" role="banner">
    <div class="header-inner">
        <a href="/" class="site-header__logo-link" aria-label="Return to homepage">
            <svg class="site-header__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
            
            </a>

        <div class="site-header__text">
            <a class="site-header__brand" href="/" aria-label="Go to homepage">AL&amp;DS Shop</a>
            <p class="site-header__tagline">Curated products â€” clean design, delightful shopping</p>
        </div>
    </div>

    <div class="user-menu" aria-hidden="false">
        <div id="user-dropdown" class="user-menu__dropdown" aria-haspopup="true">
        {% if customer %}
            <button id="btn-user-menu" class="user-menu__trigger" aria-expanded="false">
            {{ customer.customername }}
            </button>
            <div class="user-menu__content" role="menu" aria-label="User menu">
            <a role="menuitem" class="user-menu__link" href="/customer">Customer Profile</a>
            <a role="menuitem" class="user-menu__link" href="/logout">Logout</a>
            </div>
        {% else %}
            <button id="btn-user-menu" class="user-menu__trigger" aria-expanded="false">
            Account
            </button>
            <div class="user-menu__content" role="menu" aria-label="Account menu">
            <a role="menuitem" class="user-menu__link" href="/login">Login</a>
            <a role="menuitem" class="user-menu__link" href="/register">Register</a>
            </div>
        {% endif %}
        </div>
    </div>
</header>

<script>
    (function () {
      'use strict';
        // --- Dropdown Logic ---
        const userDropdown = document.getElementById('user-dropdown');
        const userButton = document.getElementById('btn-user-menu');
        
        if (userButton && userDropdown) {
            userButton.addEventListener('click', (e) => {
                e.stopPropagation();
                const isExpanded = userButton.getAttribute('aria-expanded') === 'true';
                toggleDropdown(!isExpanded);
            });
            document.addEventListener('click', (e) => {
                if (!userDropdown.contains(e.target)) {
                toggleDropdown(false);
                }
            });
        }

        function toggleDropdown(shouldOpen) {
            if (!userDropdown || !userButton) return;
            if (shouldOpen) {
                userDropdown.classList.add('is-open');
                userButton.setAttribute('aria-expanded', 'true');
            } else {
                userDropdown.classList.remove('is-open');
                userButton.setAttribute('aria-expanded', 'false');
            }
        }
    })();
</script>